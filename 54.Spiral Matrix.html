<script src="utilities.js"></script>
<script>

    /**
     * @param {number[][]} matrix
     * @return {number[]}
     */
    var spiralOrder = function (matrix) {
        let ans = [];
        while (matrix.length > 0 && matrix[0].length > 0) {
            ans = ans.concat(matrix.shift());
            let matrixLen = matrix.length;
            if (matrixLen === 0) break;
            for (let i = 0; i < matrixLen; i++) {
                const row = matrix[i];
                ans.push(row.pop());
            };
            if (matrix[0].length === 0) break;
            ans = ans.concat(matrix.pop().reverse());
            matrixLen--;
            for (let i = matrixLen - 1; i > -1; i--) {
                const row = matrix[i];
                ans.push(row.shift());
            };
        };

        return ans;
    };


    assert(
        [1, 2, 3, 6, 9, 8, 7, 4, 5],
        spiralOrder([
            [1, 2, 3],
            [4, 5, 6],
            [7, 8, 9]
        ])
    );

    assert(
        [1, 2, 3, 4, 8, 12, 11, 10, 9, 5, 6, 7],
        spiralOrder([
            [1, 2, 3, 4],
            [5, 6, 7, 8],
            [9, 10, 11, 12]
        ])
    );

    assert(
        [1, 2, 4, 6, 5, 3],
        spiralOrder([
            [1, 2],
            [3, 4],
            [5, 6]
        ])
    );

    assert(
        [1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11, 10],
        spiralOrder([
            [1, 2, 3, 4],
            [5, 6, 7, 8],
            [9, 10, 11, 12],
            [13, 14, 15, 16]
        ])
    );

</script>