<script src="utilities.js"></script>
<script>

    /**
     * @param {number} x
     * @return {number}
     */
    var mySqrt = function (x) {
        if (x === 0) return 0;
        let min = 1;
        let max = x;
        safetyWhile(() => (max - min > 1), () => {
            const mid = Math.floor((max + min) / 2);
            const sq = mid * mid;
            if (sq === x)
                max = min = mid;
            else if (sq > x)
                max = mid;
            else
                min = mid;
        });

        return min;
    };

    assert(1, mySqrt(3));
    assert(2, mySqrt(4));
    safetyWhile.timeout = 300 * 1000;
    assert(2, mySqrt(5));
    safetyWhile.timeout = null;
    assert(2, mySqrt(6));
    assert(2, mySqrt(8));
    assert(8, mySqrt(65));
    assert(8, mySqrt(80));
    assert(10, mySqrt(109));

    for (let i = 0; i < 5; i++) {
        const test = Math.floor(Math.random() * 100 + Math.random() * 10);
        assert(test, mySqrt(test * test));
    }

</script>